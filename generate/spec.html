
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Spec from source Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-forkmegithub/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-prism/prism.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-anchors/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="spec/meta.html" />
    
    
    <link rel="prev" href="../use/schemas.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1.1" data-path="../about.html">
            
                <a href="../about.html">
            
                    
                    Approaches
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.2" data-path="../install.html">
            
                <a href="../install.html">
            
                    
                    Installation
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../features.html">
            
                <a href="../features.html">
            
                    
                    Features
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" >
            
                <span>
            
                    
                    Tutorials
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../tutorial/todo-list.html">
            
                <a href="../tutorial/todo-list.html">
            
                    
                    Simple Server
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../use/middleware.html">
            
                <a href="../use/middleware.html">
            
                    
                    Middleware
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../tutorial/custom-server.html">
            
                <a href="../tutorial/custom-server.html">
            
                    
                    Custom Server
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="../tutorial/dynamic.html">
            
                <a href="../tutorial/dynamic.html">
            
                    
                    Dynamic Server
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5" >
            
                <span>
            
                    
                    Security
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.5.1" data-path="../tutorial/authentication/">
            
                <a href="../tutorial/authentication/">
            
                    
                    Authentication
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5.2" data-path="../tutorial/oauth2/">
            
                <a href="../tutorial/oauth2/">
            
                    
                    OAuth2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5.3" data-path="../tutorial/composed-auth/">
            
                <a href="../tutorial/composed-auth/">
            
                    
                    Composition
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" >
            
                <span>
            
                    
                    Use-Cases
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../usage/swagger.html">
            
                <a href="../usage/swagger.html">
            
                    
                    Options and commands
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../usage/serve_ui.html">
            
                <a href="../usage/serve_ui.html">
            
                    
                    Serve UI
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../usage/validate.html">
            
                <a href="../usage/validate.html">
            
                    
                    Validate
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" >
            
                <span>
            
                    
                    Generate
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.4.1" data-path="requirements.html">
            
                <a href="requirements.html">
            
                    
                    Dependencies & Requirements
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4.2" data-path="client.html">
            
                <a href="client.html">
            
                    
                    API Client
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4.3" data-path="server.html">
            
                <a href="server.html">
            
                    
                    API Server
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.4.3.1" data-path="../use/server.html">
            
                <a href="../use/server.html">
            
                    
                    Usage
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.4.4" data-path="model.html">
            
                <a href="model.html">
            
                    
                    API Model
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.4.4.1" data-path="../use/schemas.html">
            
                <a href="../use/schemas.html">
            
                    
                    Model generation rules
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter active" data-level="1.4.5" data-path="spec.html">
            
                <a href="spec.html">
            
                    
                    Spec from source
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.5.1" data-path="spec/meta.html">
            
                <a href="spec/meta.html">
            
                    
                    swagger:meta
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.2" data-path="spec/route.html">
            
                <a href="spec/route.html">
            
                    
                    swagger:route
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.3" data-path="spec/params.html">
            
                <a href="spec/params.html">
            
                    
                    swagger:params
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.4" data-path="spec/operation.html">
            
                <a href="spec/operation.html">
            
                    
                    swagger:operation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.5" data-path="spec/response.html">
            
                <a href="spec/response.html">
            
                    
                    swagger:response
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.6" data-path="spec/model.html">
            
                <a href="spec/model.html">
            
                    
                    swagger:model
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.7" data-path="spec/allOf.html">
            
                <a href="spec/allOf.html">
            
                    
                    swagger:allOf
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.8" data-path="spec/strfmt.html">
            
                <a href="spec/strfmt.html">
            
                    
                    swagger:strfmt
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.9" data-path="spec/discriminated.html">
            
                <a href="spec/discriminated.html">
            
                    
                    swagger:discriminated
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.10" data-path="spec/ignore.html">
            
                <a href="spec/ignore.html">
            
                    
                    swagger:ignore
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../use/template_layout.html">
            
                <a href="../use/template_layout.html">
            
                    
                    Custom generation
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="templates.html">
            
                <a href="templates.html">
            
                    
                    Custom templates
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../cli_helpers.html">
            
                <a href="../cli_helpers.html">
            
                    
                    CLI autocompletion
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../faq/">
            
                <a href="../faq/">
            
                    
                    FAQ
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="../faq/faq_setup.html">
            
                <a href="../faq/faq_setup.html">
            
                    
                    Installation,setup and environment
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="../faq/faq_model.html">
            
                <a href="../faq/faq_model.html">
            
                    
                    Model generation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="../faq/faq_server.html">
            
                <a href="../faq/faq_server.html">
            
                    
                    Server generation & customization
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4" data-path="../faq/faq_client.html">
            
                <a href="../faq/faq_client.html">
            
                    
                    Client generation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.5" data-path="../faq/faq_spec.html">
            
                <a href="../faq/faq_spec.html">
            
                    
                    Spec generation from source
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.6" data-path="../faq/faq_testing.html">
            
                <a href="../faq/faq_testing.html">
            
                    
                    API testing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.7" data-path="../faq/faq_documenting.html">
            
                <a href="../faq/faq_documenting.html">
            
                    
                    Documenting your API
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Spec from source</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="swaggerjson-generation"><a name="swaggerjson-generation" class="plugin-anchor" href="#swaggerjson-generation"><i class="fa fa-link" aria-hidden="true"></i></a>swagger.json generation</h1>
<p>The toolkit has a command that will let you generate a swagger spec document from your code.
The command integrates with go doc comments, and makes use of structs when it needs to know of
types.</p>
<!--more-->
<p>Based on the work from <a href="https://github.com/yvasiyarov/swagger" target="_blank">https://github.com/yvasiyarov/swagger</a>
It uses a similar approach but with expanded annotations and it produces a swagger 2.0 spec.</p>
<p>The goal of the syntax is to make it look as a natural part of the documentation for the application code.</p>
<p>The generator is passed a main package and it uses that to discover all the code in use.
To do this it makes use of go&apos;s loader package. The same package that is used by tools like goimports to discover which files to format.</p>
<p>Once the parser has encountered a comment that matches on of its known tags, the parser will assume that the rest of the comment block is for swagger.</p>
<h3 id="usage"><a name="usage" class="plugin-anchor" href="#usage"><i class="fa fa-link" aria-hidden="true"></i></a>Usage</h3>
<p>To generate a spec:</p>
<pre class="language-"><code>swagger generate spec -o ./swagger.json
</code></pre><p>You give it a main file and it will parse all the files that are reachable by that main
package to produce a swagger specification.</p>
<p>To use you can add a go:generate comment to your main file for example:</p>
<pre class="language-"><code>//go:generate swagger generate spec
</code></pre><p>The command requires a main package or file and it wants your code to compile. It uses the go tools loader to load an application and then scans all the packages that are in use by the code base.
This means that for something to be discoverable it needs to be reachable by a code path triggered through the main package.</p>
<p>If an annotation is not yet supported or you want to merge with a pre-existing spec, you can use the -i parameter.</p>
<pre class="language-"><code>swagger generate spec -i ./swagger.yml -o ./swagger.json
</code></pre><p>The idea is that there are certain things that are more easily expressed by just using yaml, to</p>
<h4 id="parsing-rules"><a name="parsing-rules" class="plugin-anchor" href="#parsing-rules"><i class="fa fa-link" aria-hidden="true"></i></a>Parsing rules</h4>
<p><img class="emoji" title=":warning" alt=":warning" src="https://assets-cdn.github.com/images/icons/emoji/unicode/26a0.png?v5" width="20" height="20" align="absmiddle">This command relies heavily on the way godoc works. <img class="emoji" title=":warning" alt=":warning" src="https://assets-cdn.github.com/images/icons/emoji/unicode/26a0.png?v5" width="20" height="20" align="absmiddle"></p>
<p>This means you should be very aware of all the things godoc supports.</p>
<ul>
<li><a href="http://blog.golang.org/godoc-documenting-go-code" target="_blank">godoc documenting go code</a></li>
<li><a href="https://golang.org/pkg/go/doc/#ToHTML" target="_blank">godoc ToHTML</a></li>
<li><a href="https://golang.org/doc/effective_go.html#commentary" target="_blank">commenting go effectively</a></li>
<li><a href="https://godoc.org/golang.org/x/tools/cmd/godoc" target="_blank">godoc documentation</a></li>
</ul>
<p>Single page which documents all the currently supported godoc rules:</p>
<ul>
<li><a href="https://godoc.org/github.com/fluhus/godoc-tricks" target="_blank">godoc tricks</a></li>
</ul>
<p>The generated code tries to avoid golint errors.</p>
<ul>
<li><a href="https://github.com/golang/lint" target="_blank">go lint</a></li>
<li><a href="https://github.com/golang/go/wiki/CodeReviewComments" target="_blank">go lint style guide</a></li>
</ul>
<p>When an object has a title and a description field, it will use the go rules to parse those. So the first line of the
comment block will become the title, or a header when rendered as godoc. The rest of the comment block will be treated
as description up to either the end of the comment block, or a line that starts with a known annotation.</p>
<h4 id="annotation-syntax"><a name="annotation-syntax" class="plugin-anchor" href="#annotation-syntax"><i class="fa fa-link" aria-hidden="true"></i></a>Annotation syntax</h4>
<p>If you want to exclude something from the spec generation process you can try with the struct tag: <code>json:&quot;-&quot;</code></p>
<p>There are several annotations that mark a comment block as a participant for the swagger spec.</p>
<ul>
<li><a href="spec/meta.html">swagger:meta</a></li>
<li><a href="spec/route.html">swagger:route</a></li>
<li><a href="spec/params.html">swagger:parameters</a></li>
<li><a href="spec/response.html">swagger:response</a></li>
<li><a href="spec/model.html">swagger:model</a></li>
<li><a href="spec/allOf.html">swagger:allOf</a></li>
<li><a href="spec/strfmt.html">swagger:strfmt</a></li>
<li><a href="spec/discriminated.html">swagger:discriminated</a></li>
<li><a href="spec/ignore.html">swagger:ignore</a></li>
</ul>
<h4 id="embedded-types"><a name="embedded-types" class="plugin-anchor" href="#embedded-types"><i class="fa fa-link" aria-hidden="true"></i></a>Embedded types</h4>
<p>For the embedded schemas there are a set of rules for the spec generator to vary the definition it generates.
When an embedded type isn&apos;t decorated with the <code>swagger:allOf</code> annotation, then the properties from the embedded value will be included in the generated definition as if they were defined on the definition. But when the embedded type is decorated with the <code>swagger:allOf</code> annotation then the all of element will be defined as a &quot;$ref&quot; property instead. For an annotated type there is also the possibility to specify an argument, the value of this argument will be used as the value for the <code>x-class</code> extension. This allows for generators that support the
<code>x-class</code> extension to reliably build a serializer for a type with a discriminator</p>
<h4 id="known-vendor-extensions"><a name="known-vendor-extensions" class="plugin-anchor" href="#known-vendor-extensions"><i class="fa fa-link" aria-hidden="true"></i></a>Known vendor extensions</h4>
<p>There are a couple of commonly used vendor extensions that most frameworks support to add functionality to the swagger spec.</p>
<p>For generating a swagger specification document this toolkit supports:</p>
<table>
<thead>
<tr>
<th>Vendor extension</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>x-isnullable</td>
<td>makes a property value nullable, for go code that means a pointer</td>
</tr>
<tr>
<td>x-nullable</td>
<td>makes a property value nullable, for go code that means a pointer</td>
</tr>
<tr>
<td>x-go-name</td>
<td>the go name of a type</td>
</tr>
<tr>
<td>x-go-package</td>
<td>the go package of a type</td>
</tr>
<tr>
<td>x-class</td>
<td>this is used in conjunction with discriminators to give a full type name</td>
</tr>
<tr>
<td>x-omitempty</td>
<td>this is used with arrays to control presence of omitempty tag to be used by JSON Marshaler</td>
</tr>
</tbody>
</table>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="../use/schemas.html" class="navigation navigation-prev " aria-label="Previous page: Model generation rules">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="spec/meta.html" class="navigation navigation-next " aria-label="Next page: swagger:meta">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Spec from source","level":"1.4.5","depth":2,"next":{"title":"swagger:meta","level":"1.4.5.1","depth":3,"path":"generate/spec/meta.md","ref":"generate/spec/meta.md","articles":[]},"previous":{"title":"Model generation rules","level":"1.4.4.4.1","depth":4,"path":"use/schemas.md","ref":"use/schemas.md","articles":[]},"dir":"ltr"},"config":{"plugins":["forkmegithub","prism","-highlight","anchors"],"root":"./docs","styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"forkmegithub":{"color":"green","url":"https://github.com/go-swagger/go-swagger"},"prism":{},"anchors":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"gitbook":"*"},"file":{"path":"generate/spec.md","mtime":"2018-02-01T22:20:06.189Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2018-05-29T07:35:54.742Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-forkmegithub/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

